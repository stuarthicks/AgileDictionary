<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Agile Dictionary</title>
    <link href="layout.css" type="text/css" rel="stylesheet">
    <link href="colours.css" type="text/css" rel="stylesheet">
    <script type='text/javascript'>
      Array.prototype.randomElement = function(){ return this[Math.floor(Math.random() * this.length)] };
      function loadJSON(filePath) {
        var client = new XMLHttpRequest();
        client.open('GET', filePath, false);
        client.send();
        return JSON.parse(client.responseText);
      }
	  
      var defs = loadJSON([
          './yuriy-zubarev.json',
          './programmingisterrible.json',
          './resign-patterns.json'
        ].randomElement());

      function refreshDef() {
        var def = defs['definitions'].randomElement();
        document.getElementById('word').innerHTML = def['word'];
        document.getElementById('meaning').innerHTML = '<p>' + def['meaning'].split('\n').join('</p><p>') + '</p>';
        document.getElementById('author').innerHTML = '<p><a href="' + defs['url'] + '">' + defs['author'] + '</a></p>';
        // TODO add a perma-link for each def?
      }
    </script>
  </head>
  <body onload="refreshDef()">
    <div class="definition">
      <h2 id="word" class="word"></h2>
      <div id="meaning" class="meaning"></div>
      <div id="author" class="author"></div>
    </div>
    <div class="footer">
      <p>This was made by <a href="https://github.com/stuarthicks">calamari</a> and <a href="http://haku.me">haku</a>.</p>
      <p>Also <a href="./chart.html">charts</a>.</p>
    </div>
  </body>
</html>
